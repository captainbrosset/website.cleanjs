{% extends "base.html" %}

{% block content %}
	<style type="text/css">
		.general {
			padding: 0;
			margin: 0 0 30px 30px;
			color: #222;
		}
		.lines {
			padding: 0;
			margin: 0;
			list-style-type: none;
			width: 10000px;
		}
		.lines .line {
			overflow: hidden;
			padding: 0;
			margin: 0;
			list-style-type: none;
		}
		.lines .line .gutter {
			float: left;
			text-align: right;
			width: 25px;
			padding: 4px 5px 4px 0;
			color: #aaa;
			font-size: 11px;
		}
		.lines .nomessage .gutter {
			color: #ddd;
		}
		.lines .line .messages {
			float: left;
			padding: 0;
			margin: 0;
			list-style-type: none;
			width: 500px;
		}
		.lines .line .messages li, .general li {
			padding: 4px 1em;
			line-height: 13px;
		}
		.lines .line .code {
			float :left;
			margin: 0;
			padding: 0 1em;
			font-family: Menlo, Monaco, Consolas, "Lucida Console", monospace;
			font-size: 11px;
		}
		.lines .error, .lines .info, .lines .warning {
			border-left: 4px solid #3e93bf;
			background: #eee;
		}
		.lines .warning {
			border-color: #f5931f;
		}
		.lines .error {
			font-weight: bold;
			border-color: #d83e0f;
		}
		.general .error {
			color: #d83e0f;
			font-weight: bold;
		}
		.general .warning {
			color: #f5931f;
		}
	</style>

	<ul class='general'>
		<li class="info"><strong>Grade: {{ rating }}</strong></li>
		{% for message in bag.get_messages %}
			{% if not message.line %}
				<li class='{{message.type}}'>{{message.content}}</li>
			{% endif %}
		{% endfor %}
	</ul>

	<ul class='lines'>
		{% for line in lines %}
			<li class='line{% if line.message_count == 0 %} nomessage{% endif %}'>
				<span class='gutter'>{{ line.line.line_number }}</span>
				<ul class='messages'>
					{% if line.message_count == 0 %}
						<li>&nbsp;</li>
					{% endif %}
					{% for message in line.messages %}
						<li class='{{ message.type }}'>{{ message.content }}</li>
					{% endfor %}
				</ul>
				<pre class='code'>{{ line.line.complete_line|escape }}</pre>
			</li>
		{% endfor %}
	</ul>
{% endblock %}