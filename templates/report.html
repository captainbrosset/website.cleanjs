{% extends "base.html" %}

{% block content %}
	<style type="text/css">
		.general {
			padding: 5px 25px;
			margin: 25px 0;
			color: #222;
			background: #eee;
			list-style-type: none;
		}
		.general li {
			margin: 5px 0;
			padding: 0;
			font-size: 12px;
		}
		.lines {
			padding: 10px 0;
			background: #eee;
			margin: 0;
			list-style-type: none;
			width: 10000px;
			font-size: 12px;
		}
		.lines .line {
			overflow: hidden;
			padding: 0;
			margin: 1px 0;
			list-style-type: none;
		}
		.lines .line .gutter {
			float: left;
			text-align: right;
			width: 25px;
			padding: 4px 5px 4px 0;
			color: #aaa;
			font-size: 11px;
		}
		.lines .nomessage .gutter {
			color: #ddd;
		}
		.lines .line .messages {
			float: left;
			padding: 0;
			margin: 0;
			list-style-type: none;
			width: 500px;
		}
		.lines .line .messages li {
			padding: 4px 1em;
			line-height: 13px;
		}
		.lines .line .code {
			float :left;
			margin: 0;
			padding: 0 1em;
			font-family: Menlo, Monaco, Consolas, "Lucida Console", monospace;
			font-size: 11px;
		}
		.lines .error, .lines .info, .lines .warning {
			border-left: 4px solid #3e93bf;
			background: #ddd;
			font-size: 11px;
			box-shadow: 0px 1px 2px #666;
		}
		.lines .warning {
			border-color: #f5931f;
		}
		.lines .error {
			font-weight: bold;
			border-color: #d83e0f;
		}
		.general .error {
			color: #d83e0f;
		}
		.general .warning {
			color: #f5931f;
		}
		.reportSharing {
			display: none;
			position: absolute;
			height: 26px;
			top: 23px;
			left: 150px;
		}
		.shareUrlBtn {
			position: absolute;
			top: 0;
			left: 0;
			font-size: 12px;
			border-radius: 4px 0 0 4px;
		}
		#shareUrlField {
			position: absolute;
			top: 0;
			left: 57px;
			font-size: 12px;
			border: 1px solid #aaa;
			padding: .25em 1em;
			border-radius: 0 4px 4px 0;
			width: 200px;
		}

		.share {
			margin-top: 0;
			padding: 0;
			font-size: 12px;
		}

		.rating {
			position: absolute;
			top: 0px;
			right: 30px;
			z-index: 1;
			width: 120px;
			height: 120px;
			border-radius: 120px;
			color: red;
			font-size: 100px;
			font-weight: bold;
			text-align: center;
			border: 18px solid red;
			font-family: 'Lato', sans-serif;
			-webkit-transform: rotate(17deg);
			opacity: .6;
		}
		.rating:after {
			content: " ";
			position: absolute;
			top: -18px;
			right: -18px;
			z-index: 2;
			width: 156px;
			height: 156px;
			opacity: 0.7;
			background: url(/statics/img/stamp_overlay.png) no-repeat 10% 50%;
		}
	</style>

	<p class="share">Access this report at <a href="/{{ pb64 }}" id="shareURL"></a></p>

	<div class="rating">{{ rating }}</div>

	<ul class='lines'>
		{% for line in lines %}
			<li class='line{% if line.message_count == 0 %} nomessage{% endif %}'>
				<span class='gutter'>{{ line.line.line_number }}</span>
				<ul class='messages'>
					{% if line.message_count == 0 %}
						<li>&nbsp;</li>
					{% endif %}
					{% for message in line.messages %}
						<li class='{{ message.type }}' id="msg-{{ line.line.line_number }}{{ forloop.counter }}">{{ message.content }}</li>
					{% endfor %}
				</ul>
				<pre class='code'>{{ line.line.complete_line|escape }}</pre>
			</li>
		{% endfor %}
	</ul>

	<script type="text/javascript">
		window.onload = function() {
			document.getElementById("shareURL").innerHTML = document.location.href;
		}
	</script>
{% endblock %}